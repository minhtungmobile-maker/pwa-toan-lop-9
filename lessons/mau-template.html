<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{TITLE}}</title>

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

  <!-- CSS -->
  <style>
    body {
      font-family: 'Times New Roman', serif;
      line-height: 1.6;
      padding: 1.5rem;
      max-width: 800px;
      margin: 0 auto;
      background: #f9f9f9;
      color: #212121;
    }
    h1 {
      text-align: center;
      color: #1976d2;
      margin-bottom: 1.5rem;
    }
    .section {
      background: #e3f2fd;
      padding: 1.2rem;
      border-radius: 10px;
      margin: 1.2rem 0;
    }
    .btn-bar {
      margin-top: 2rem;
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .btn {
      padding: 0.8rem 1.5rem;
      border-radius: 10px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      flex: 1 1 120px;      font-size: 1rem;
    }
    .btn-back { background: #1976d2; color: white; }
    .btn-home { background: #4caf50; color: white; }
    .btn-next { background: #ff9800; color: white; }
  </style>
</head>
<body>
  <h1>{{TITLE}}</h1>

  <div class="section">
    <h2>1. Nội dung chính</h2>
    {{CONTENT}}
  </div>

  <div class="section">
    <h2>2. Bài tập</h2>
    <p>Áp dụng kiến thức trên để giải các bài tập trong SGK.</p>
  </div>

  <!-- NÚT CHỨC NĂNG CHUẨN HSTAI 777 -->
  <div class="btn-bar">
    <button class="btn btn-back" onclick="history.back()">← Quay lại</button>
    <a href="../index.html" class="btn btn-home">🏠 Về trang chủ</a>
    <button class="btn btn-next" onclick="goToNext()">➡️ Bài tiếp theo</button>
  </div>

  <script>
    // Render công thức toán học
    document.addEventListener("DOMContentLoaded", () => {
      renderMathInElement(document.body, {
        delimiters: [
          { left: "$$", right: "$$", display: true },
          { left: "$", right: "$", display: false }
        ]
      });
    });

    // Thống kê lượt học
    localStorage.setItem('toan9_lessons', (parseInt(localStorage.getItem('toan9_lessons') || '0') + 1).toString());

    // Chuyển bài theo thứ tự chuẩn
    function goToNext() {
      const current = window.location.pathname.split('/').pop().replace('.html', '');
      const nextMap = {
        'ds-ch1-bai1': 'ds-ch1-bai2',
        'ds-ch1-bai2': 'ds-ch1-bai3',
        'ds-ch1-bai3': 'ds-ch1-bai4',
        'ds-ch1-bai4': 'ds-ch1-bai5',
        'ds-ch1-bai5': 'ds-ch1-bai6',        'ds-ch1-bai6': 'ds-ch1-bai7',
        'ds-ch1-bai7': 'ds-ch2-bai1',
        'ds-ch2-bai1': 'ds-ch2-bai2',
        'ds-ch2-bai2': 'ds-ch2-bai3',
        'ds-ch2-bai3': 'ds-ch2-bai4',
        'ds-ch2-bai4': 'ds-ch2-bai5',
        'ds-ch2-bai5': 'ds-ch3-bai1',
        'ds-ch3-bai1': 'ds-ch3-bai2',
        'ds-ch3-bai2': 'ds-ch3-bai3',
        'ds-ch3-bai3': 'ds-ch3-bai4',
        'ds-ch3-bai4': 'ds-ch3-bai5',
        'ds-ch3-bai5': 'ds-ch4-bai1',
        'ds-ch4-bai1': 'ds-ch4-bai2',
        'ds-ch4-bai2': 'ds-ch4-bai3',
        'ds-ch4-bai3': 'ds-ch4-bai4',
        'ds-ch4-bai4': 'ds-ch4-bai5',
        'ds-ch4-bai5': 'ds-ch4-bai6',
        'ds-ch4-bai6': 'hh-ch1-bai1',
        'hh-ch1-bai1': 'hh-ch1-bai2',
        'hh-ch1-bai2': 'hh-ch1-bai3',
        'hh-ch1-bai3': 'hh-ch1-bai4',
        'hh-ch1-bai4': 'hh-ch2-bai1',
        'hh-ch2-bai1': 'hh-ch2-bai2',
        'hh-ch2-bai2': 'hh-ch2-bai3',
        'hh-ch2-bai3': 'hh-ch2-bai4',
        'hh-ch2-bai4': 'hh-ch2-bai5',
        'hh-ch2-bai5': 'hh-ch2-bai6',
        'hh-ch2-bai6': 'hh-ch2-bai7',
        'hh-ch2-bai7': 'hh-ch3-bai1',
        'hh-ch3-bai1': 'hh-ch3-bai2',
        'hh-ch3-bai2': 'hh-ch3-bai3',
        'hh-ch3-bai3': 'hh-ch3-bai4',
        'hh-ch3-bai4': 'hh-ch3-bai5',
        'hh-ch3-bai5': 'hh-ch3-bai6',
        'hh-ch3-bai6': 'hh-ch4-bai1',
        'hh-ch4-bai1': 'hh-ch4-bai2',
        'hh-ch4-bai2': 'hh-ch4-bai3'
      };
      const next = nextMap[current];
      if (next) {
        window.location.href = next + '.html';
      } else {
        alert('Đây là bài cuối cùng.');
      }
    }
  </script>
</body>
</html>